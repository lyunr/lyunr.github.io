<!DOCTYPE html>
<html>
<head>
    <title>系统初始化</title>
    <script src="js/utils.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { padding: 10px 15px; background: #4CAF50; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h1>系统初始化向导</h1>
    
    <div>
        <label>设置管理员密码：</label>
        <input type="password" id="adminPwd" placeholder="至少6位密码">
    </div>
    
    <button onclick="initSystem()">确认初始化</button>

    <script>
        function initSystem() {
            const pwd = document.getElementById('adminPwd').value;
            if (!pwd || pwd.length < 6) {
                alert('密码长度至少6位！');
                return;
            }

            // 复用 utils.js 的初始化方法
            Utils.initDataFiles(); 

            // 覆盖默认密码
            const config = Utils.getData('config');
            config.adminPassword = pwd;
            Utils.saveData('config', config);

            alert(`初始化成功！\n管理员密码已设为：${pwd}`);
            window.location.href = 'admin.html';
        }
    </script>
</body>
</html>
