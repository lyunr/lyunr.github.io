<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>终极防红链接生成器</title>
  <style>
    /* [保持之前的样式不变] */
  </style>
</head>
<body>
  <!-- [保持之前的HTML结构不变] -->

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // [保持之前的事件监听代码不变]
      
      function generateAntiBlockLink() {
        const originalUrl = targetUrlInput.value.trim();
        if (!originalUrl) return alert('请输入URL');
        
        // 使用更安全的编码方式
        const encoded = encodeURIComponent(btoa(originalUrl));
        
        // 生成直接跳转链接
        const antiBlockUrl = `${window.location.href.replace('generator.html', '')}redirect.html?url=${encoded}`;
        
        resultUrl.value = antiBlockUrl;
        embedCode.value = `<iframe src="${antiBlockUrl}" style="width:100%;height:100vh;border:none;"></iframe>`;
        
        // [保持其他逻辑不变]
      }
    });
  </script>
</body>
</html>
